// Generated by BUCKLESCRIPT VERSION 4.0.6, PLEASE EDIT WITH CARE

import * as Block from "bs-platform/lib/es6/block.js";
import * as Curry from "bs-platform/lib/es6/curry.js";
import * as Js_primitive from "bs-platform/lib/es6/js_primitive.js";

function cmd(promise, tagger) {
  return /* EnqueueCall */Block.__(2, [(function (callbacks) {
                promise.then((function (res) {
                        var match = Curry._1(tagger, res);
                        if (match !== undefined) {
                          Curry._1(callbacks[0][/* enqueue */0], Js_primitive.valFromOption(match));
                          return Promise.resolve(/* () */0);
                        } else {
                          return Promise.resolve(/* () */0);
                        }
                      }));
                return /* () */0;
              })]);
}

function result(promise, msg) {
  return /* EnqueueCall */Block.__(2, [(function (callbacks) {
                var enq = function (result) {
                  return Curry._1(callbacks[0][/* enqueue */0], Curry._1(msg, result));
                };
                promise.then((function (res) {
                          return Promise.resolve(enq(/* Ok */Block.__(0, [res])));
                        })).catch((function (err) {
                        var err_to_string = function (err) {
                          return "" + (String(err) + "");
                        };
                        return Promise.resolve(enq(/* Error */Block.__(1, [err_to_string(err)])));
                      }));
                return /* () */0;
              })]);
}

export {
  cmd ,
  result ,
  
}
/* No side effect */
